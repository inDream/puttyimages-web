language: generic
services:
  - docker
sudo: required
install:
  - docker-compose build
script:
  - make test
deploy:
  - provider: script
    script: ./scripts/deploy-docker-hub.sh
    skip_cleanup: true
    on:
      repo: oursky/puttyimages-web
      branch: master
after_deploy:
  - ./scripts/trigger-github-deploy.sh
env:
  global:
    # DOCKER_USERNAME
    - secure: PC9cYzOPyVQAfx+kFoHC5gGvnvcgQiOPQeNZv/to+S+Sh9g7NE+ATrLZLDJDQlCePhOSB+2HA1n/cmMXhyT4D3eiYXSlCbkme5Zr78Ss+FkSVPxNdp4O6FxC4qiACeCpNQ4090HI+SfJOcZdF6DAMR0Sgff4qKd0w03bsRTdkKtfPnUkhB3/R86rzXkNFGSSHcp802yVdNIDoyY5P/5zasKCN/oslw1WhhmwMC8Mh63rNSnTAFru1101wbUMGUr1wMluoygsYDW6A5/kzgNBQyJVV4eH7CSD29COSLyjGUyf+iGYBMSWfJ4bCOjKkvv6lgSiah8Bf65W26PGZ/zzSwF/3h+X+Pprlp1Aj16SIzGB+pRg4zvPMGKs1NmEANrpkBPGBLnaPlfXocTI5WImX4ykFz9qCZtjQl7U7U67sSshevyebmvVrfD2i+65iRHecnEMjTf9doHtYg0V1Rr82q8Am4vW/U5vTq3kIx2xBsgsPed0bYaoUv9EEiJIS9NSWx6caNCC+A4b0t4rHAapspwAJBbotuhZKDMSfsNygfdyhff6bbXALsHtrwb0ocpxPkH8igbp/phzdiUmzW34TiXJZKES5o10wUhbDgPJDETWAsgsC1+svd2tczEvaXy8Sk2n4X+TilrLPVt57ugPDZee5MSDAm8wq4NjBj7r46s=
    # DOCKER_PASSWORD
    - secure: d8zIElU2Hx15AVsWE/8rN6gyaHPMwGNZrLp3DRtTj36X1vDbGlLkR9KsR09lgAUSkK94xHVP0GxbKtUOrk/ZYg2ZGAvEYLrq/HNE2CQa+3AiDuooDcfcfvExr2QrpS9scgX28foblLY3KmZ8YvxPISQ3W2fWe6iSdPYx01AvlFYk9DsEhQtQ7PEKpJgd7FKhWokwj4mKCevtShCwBRAAwIB++LdmIKuJSwpRDBw5jVvVoUda9EGbMnStAk1xFmbu6p0zZOhnIkkr4EhnN1s2/T5lHTVupLnF3uAusmUAhC5c3RLYNmNB+9MzcSKBmhXv6TaeDmGovxN9VW10mIhsDAQqARqNNjXxeG2ZpSrKa/RUQYkTVv5fFi2896Btubva1caExE1tpM/yQL5YHnwQrMJty8/Yi8gSWbaRVXnY27YHHwt5Y9hFtQkqkIj8ceRcUTJGAtCvjnPXeISlQduJOZLIqZaIOSCdIfQUGEYVC9/GReTj0N9NfMz0MCH4indEGMzRDyqz4glzLiUYHST/Ct2twAeigFxWGKnMlFoImRa8wAHUJeh5M4+iygGcv5D/OLJn9E3HRnBigPQuJTF2R4KghJA3Y6wXGr0FTCfDrnjcJYoF8u8zGl4HJfYMFRF94zBGYRoy5/WZlHBEtFpT2682NXmR1Ufz1igDBpGw8E0=
    # GITHUB_TOKEN
    - secure: lK4h+uffcxiu9cpffJGsR+W2v5B1dpfXIhPcmw7ao7/YkPi0kBWpLXEUlSUUWozG+kk2Fxw0xk3yuGOsv8cV1rH/EChrWB8Z8B60OX92WJNBCmjQmdvxFcyrSnJyikrBjw0CuHypv6/vPqdQfBlia/Y2rGmdvMTdEd8fUdwD5XK2zVz+fisQboiurNx05YkNW3LV0cSAxPP9Nk9Sm4PcHLzgClss0/Ol2AamkiLfWNArddVqui5v2PtEVW4Tt+MnlSSGWqD6k5pkjibim3vCXSkkrmidYW1P2VQyjyKqYhBeFPpMlF8w544nEWGzAbFvWs8we+5PTndjERWd1g67FndGoqSehZmXNJ0k3a/jMSe8T+opIqxV2nnyM1GB3Fqm+mqVGSChM3mRu8YO3E8bm1wJQuiFlLthnENELuCHEOZsH61Xm99q3mut1wOodLnIOtr3/7HOODayI2i4Twy8tsmtiuZkVj97SYwPRqNPueeCwx2Aib7z9I6UeayC1a/2xPVrA7MITYybCs0SdW412IzzJkokZBphEBIgZDoBuvHjE67vPPj2OJso+wHUvjSEUgfQYfV6RZB4UPXWPy7bCFENljgN8wwANUxyjfNAmpOe8wOIyOFoNVbZzaUd9bVxbUkFZXt2q3kjoWFN1T5Soea+CpiFrCxmDUFvSzqr8RE=
    # LIKECHAIN_HOST
    - secure: uwe+Ldf5xxymRixDu/eSeNVMDL66DHUjBwp5Wpp15Q4raK1nTyvLnkaiBXHBlxa5B6xuXBEwjEIyG7MqmhcOhXLDm/M0lZdgEoNt9n6Yu93NyKO6O8kuBxXWCPeQUFdY2Ce0PgUk+ZI7p2M1b1aJXAkiwLPdmG3bCsTTk1k+gftbRpdhpZi2JrQQb+QzkX4wxZyO0Y+YukfmJu28J9O0E+7MISmNZqcE31RMCHtSsxkNRKByjo0Fc5ImRQye9HD4+oC1KSi8ZseDZn+BcuUP7PSDENOJHHNuowuN2bxXD/DYYxguXi2OSk2xF7sg/Nbf6gB7eSrJ/6urLLTNEyNrNr7jJXwfSblWogzvI1UWOBV6WgJKGYz8m4wF2CQ/25oLMz2dn8Kc/QXOwyQ4neoG3y7/j4P0AAQBWtvlNe0Se8DY2s3zEvb85MeeVyxp3lFi0p/OTOhkR003UODqYqM56t4N5EjMAQdPKKCino3X6H+3CLYG8Z1tf6D3FrU5GAM3VTq5zxQlf1nB1ow4LupeSV4Y4DBOseJP5uP93eXjZGlPwT76IGWVoNyfiArSuQgG2EpQXVCMxYnxsZZcPzi9W2oZ3TcSf4sSH9uBi6NnQu+brHI59cBKlz/zksAdZfcEClRYUPe4uGjSMAdmtMLmjIxExRP+03TVnbtGyTKmPsk=
    # PROVIDER_ADDRESS
    - secure: L6i4WsJLXX9HC4xXEfJfcpZHlyu5UAOI4UgDnWnU/9rKOZwNdEKCqoP2aOUQujd12yPi6wcx3JJE5/rHZm4B40Sba+8fIzw8jiFXQwOnI7nvT8ou53C6+Xfqg784JFPHQN/kdi0PeXPyQNnPSJ4BfxdpcuURRxjP2/yWdP9164WHk7q02q3WLFBHZmd4+/e+6GosmpDH6SGXMu6iWcd1PPkKlsYWdmthIJIzNPyFURZmH7catNdZJkmkPX4jvUgjaowDjoz3nTuLziBenNppAOrH24QC750CXcCcmA0RxsxD5zlKm/y2HpUOFjyIDNGTCGalquTdakpCA/WzLh7Q1aodCKjX8b6qj0jIqbSjTuxLhlsYJ/d0Dyu0md7ZELbu5IuYn4LGSevelYm36+We3Qmv7W18VLeFpFL/tdlFQz6IkCyUUyAYbjSQtISLKcmD07ysPP17SYGIyhy/SDV4Yqnm1mHyjPmlj7EcaaNblwFJFSBu9W3ZZOXa5KfLZ+E9E93lECQ1QV4e5x5YP64rXpIZQaOTvELAjxzhlviomFOSYP93QzOr1vFie4XfOEWtXtJ167YHdOAd0tvvfhxOxPhE3JkZ/5ktv+Alr7deOA5PgilGTIzDFvNcXR6xIU7gmY6ntdsL20ZHBUn8QhfXlv+RPuuZkAXVPGwkZHUnZ64=
    # PROVIDER_PRIVATE_KEY
    - secure: IMOXiTOo9ZjCc0QlDJW7/JQb9Wh5fixZgW7NpDC2LbAtDTdpN7Sn0/F/ML1+ZouvuOB2LX5xy3V6h3nsvM1OqiLast3wPBat1oOiBSl23vgqUtxn95WGr7UPdlAjqZ83S3U1K7jUjj7OdVvWyi8LgsHBFlMg/Moc+r4bMuuApcjCdLhhEar2MG5TBuMPFX68aJSfbY+bjYD/XuEqBS2nyhYMSsARjhJl12v8igOrZFFHs4XiOM0vbSMjV8kweOiL5uKQs7YaMZSFbj5KiwOJp7W0PrrGTuGnYpVtXFRMl1IUp5ogJPKivBOcTmcpsYJRNVgXDyWPUrnB6imcjksukAKDknmRsxhdoVCd0OsROkqTNqb0cYi55sQ0r2HZ87k2Fn6mV5LDOOG9867R/0yG9KALI0AB5fWlTtBDzm0e5LjCZ/hFhpE1gIskv2nvIRDbxqWu/qDPJmaefP3pkMn7X+y5Kgcn3V6NAbiVUAzmMLsNLkM44mb4q5vaYvPAd/EQ9M0iq/jmSP5psTFWEBgojwE1PV8NSkH877spyB0IsXW43tYAdMQOXYYiJ1EuDED+3Fbv5OiF1pmXIzVfu4lr+g5TYpjuApvRCdO1NqTkKW6RQUBagQ+i/QiguVmRsWw7mc+jgODYf/Kkrhz98yIChjCdJt9KSNqFrL0iShxD58w=
